<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
        <meta content="telephone=no" name="format-detection"/>
        <link rel="icon" href="data:;base64,iVBORw0KGgo=">
        <link rel="stylesheet" href="./docs.css"/>
        <script type="text/javascript" src="./jquery.min.js"></script>
        <title>LEGO Document</title>   
    </head>
    <body>
        <div class="book">
            <div class="aside" id="aside">
                <div class="btn_l">lego</div>
                <!--<h1>导航部分点击展开</h1>
                <ul class="one" style="display: none;">
                    <li data-link='./basic/text/text.md.html'>链接链接</li>
                    <li data-link='./basic/address-field/address-field.md.html'>链接链接</li>
                    <li>链接链接</li>
                    <li>链接链接</li>
                </ul>-->
                
            </div>
            <div class="book-body">
                <div class="btn_r" id="btn">开</div>
                <section class="normal markdown-section" id="introduce"></section>
            </div>
        </div>
    </body>
    <script>

        // 动画
        $('.aside h1').click(function(){
            $('.aside ul:visible').stop(true,false).slideUp(200);
            $(this).next().stop(true,false).slideToggle(200);
        });

        $('#btn').click(function(){
            $('.aside').fadeToggle();
        });

        // 获取 JSON 文件
        $.getJSON('./docs.json',function (data){
            console.log(data.content);
            var l = data.content[0].children.length;
            for (var i = 0; i < data.content.length; i ++ ){
                for (var j = 0; j < l; j ++ ){
                    html += "<h1>" + data.content[i].name + "</h1><ul class='one' style='display: none;'><li data-link=" 
                            + data.content[i].children[j].link + ">" + data.content[i].children[j].name + "</li></ul>";
                }
                console.log(html);
                $('#aside').append(html);
            }
        });

        // 页面初始化
        $.ajax({
            url: './basic/text/text.md.html',
            data: {},
            type: 'GET',
            dataType: 'html',
            success: function (resp, status){
                $("#introduce").html(resp);
            }
        });

        // 点击切换页面
        $(".one").click(function (e){
            var target = e.target || e.srcElement;
            if (target.nodeName.toLowerCase() == 'li'){

                $.ajax({
                    url: target.getAttribute('data-link'),
                    data: {},
                    type: 'GET',
                    dataType: 'html',
                    success: function (resp, status){
                        // 右边内容页面渲染
                        $("#introduce").html(resp);
                    }
                });                       
            }
        });
        
        

        
    </script>
</html>